; Àý4.9


STACK       SEGMENT STACK 'STACK'
            DW 100H DUP(?)
TOP         LABEL WORD
STACK       ENDS
			N=22
DATA        SEGMENT
BUFFER		DB 'xidian university 2006'
DATA		ENDS
CODE		SEGMENT
			ASSUME CS:CODE,DS:DATA,ES:DATA,SS:STACK

START:
		MOV AX,DATA
		MOV DS,AX
		MOV ES,AX
		MOV AX,STACK
		MOV SS,AX
		LEA SP,TOP
		
		MOV CX,N
		LEA DI,BUFFER
		CALL SETEVEN
		MOV AH,4CH
		MOV AL,0
		INT 21H
SETEVEN PROC NEAR
		PUSH AX
		PUSH BX
		PUSH CX
		PUSH DI
SETEVEN1:
		MOV AL,[DI]
		CALL COUNTBYTE
		AND BL,01H
		JZ SETEVEN2
		OR AL,80H
		MOV [DI],AL
SETEVEN2:
		INC DI
		LOOP SETEVEN1
		POP DI
		POP CX
		POP BX
		POP AX
		RET
SETEVEN ENDP
COUNTBYTE PROC NEAR
		PUSH AX
		PUSH CX
		MOV CX,8
		XOR BL,BL
COU1:
		SHR AL,1
		ADC BL,0
		LOOP COU1
		POP CX
		POP AX
		RET
COUNTBYTE ENDP
CODE 	ENDS
		END START



















