; ä¾‹4.14


STACK 	SEGMENT STACK'STACK'
		DW 100H DUP(?)
TOP 	LABEL WORD
STACK 	ENDS
DATA 	SEGMENT
BUFFER 	DW 10
		DW 521,112,3654,-564,45,-166,771,1288,32709,-32014
DATA 	ENDS
CODE 	SEGMENT
		ASSUME CS:CODE,DS:DATA,ES:DATA,SS:STACK
START:
		MOV AX,DATA
		MOV DS,AX
		MOV ES,AX
		MOV AX,STACK
		MOV SS,AX
		LEA SP,TOP
		MOV AX,OFFSET BUFFER
		PUSH AX
		CALL COMPUTMEAN
		POP AX
		CALL DISPAX
		MOV AX,4CH
		INT 21H        
     
DISPAL	PROC NEAR
        PUSH AX
		PUSH CX
		PUSH DX
		PUSH AX
		MOV CL,4
		SHR AL,CL
		CALL CHANG
		MOV AH,02
		MOV DL,AL
		INT 21H
		POP AX
		AND AL,0FH
		CALL CHANG
		MOV AH,02
		MOV DL,AL
		INT 21H
		POP DX
		POP CX
		POP AX
		RET
DISPAL	ENDP

CHANG PROC NEAR	
		CMP AL,10
		JNGE CHANG1
		ADD AL,7
CHANG1:
		ADD AL,30H
		RET
CHANG ENDP

DISPAX PROC NEAR
		XCHG AL,AH
		CALL DISPAL
		XCHG AH,AL
		CALL DISPAL
		RET
DISPAX ENDP
  
COMPUTMEAN PROC NEAR
		PUSH BP
		MOV BP,SP
		PUSH SI
		PUSH DI
		PUSH AX
		PUSH BX
		PUSH CX
		PUSH DX
		MOV SI,[BP+4]
		XOR DX,DX
		XOR BX,BX
		XOR DI,DI
		MOV CX,[SI]
		PUSH CX
		ADD SI,2
CPTM1:
		MOV AX,[SI]
		ADD SI,2
		CWD
		ADD BX,AX
		ADC DI,DX
		LOOP CPTM1
		MOV DX,DI
		MOV AX,BX
		POP BX
		IDIV BX
CPTM2:
		MOV [BP+4],AX
		POP DX
		POP CX
		POP BX
		POP AX
		POP DI
		POP SI
		POP BP
		RET
COMPUTMEAN ENDP
CODE ENDS
     END START
